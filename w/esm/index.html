<!doctype html><html lang=en-us><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Front-End development without node_modules using Skypack and Snowpack | Hello! I&#39;m Oliver N.</title><meta name=description content="I&#39;m a software maker specialized in Go and JavaScript. My latest project is [OctoX](http://octox.io), a browser extension for navigating GitHub."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content=all,follow><meta name=googlebot content=index,follow,snippet,archive><meta property=og:title content="Front-End development without node_modules using Skypack and Snowpack"><meta property=og:description content="Once upon a time, we could simply put an HTML and a script file into an FTP server, quickly have a working website and call it a day.
Today, we have to jump through many hoops just to get the right things in the right places. Suppose Alice wants to spend her weekend making a simple to-do app or whatever little idea she enjoys. First, she has to install a big heap of 10k npm packages files."><meta property=og:type content=article><meta property=og:url content=https://olvrng.github.io/w/esm/ ><meta property=og:image content=https://olvrng.github.io/images/ogx.png><meta property=article:published_time content=2021-02-02T00:00:00&#43;00:00><meta property=article:modified_time content=2021-02-02T00:00:00&#43;00:00><meta name=twitter:card content=summary><meta name=twitter:image content=https://olvrng.github.io/images/ogx.png><meta name=twitter:title content="Front-End development without node_modules using Skypack and Snowpack"><meta name=twitter:description content="Once upon a time, we could simply put an HTML and a script file into an FTP server, quickly have a working website and call it a day.
Today, we have to jump through many hoops just to get the right things in the right places. Suppose Alice wants to spend her weekend making a simple to-do app or whatever little idea she enjoys. First, she has to install a big heap of 10k npm packages files."><link rel=stylesheet href=https://olvrng.github.io/css/style-classic.css><link rel=stylesheet href=https://olvrng.github.io/style.css><link rel=icon type=image/png href=/images/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-L5X8RJDCLM"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-L5X8RJDCLM")</script><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=/ ><i class="fas fa-chevron-left fa-lg"></i> <span class=icon-text>Home&nbsp;</span></a> <a id=menu-icon-tablet href=/ ><i class="fas fa-chevron-left fa-lg"></i> <span class=icon-text>Home&nbsp;</span></a></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Front-End development without node_modules using Skypack and Snowpack</h1><div class=meta><div class=postdate><time datetime="2021-02-02 00:00:00 &#43;0000 UTC" itemprop=datePublished>2021-02-02</time></div><div class=published-at>&nbsp;・&nbsp;published at <a target=_blank href=https://hackernoon.com/front-end-development-without-node_modules-using-skypack-and-snowpack-s03n33mk>Hacker Noon</a> , <a target=_blank href=https://medium.com/geekculture/front-end-development-without-node-modules-ff64cf7d511d>Geek Culture</a></div></div></header><div class=content itemprop=articleBody><p>Once upon a time, we could simply put an HTML and a script file into an FTP server, quickly have a working website and call it a day.<p>Today, we have to jump through many hoops just to get the right things in the right places. Suppose Alice wants to spend her weekend making a simple to-do app or whatever little idea she enjoys. First, she has to install a big heap of 10k npm packages files. Then she spends a few hours searching how to get this week&rsquo;s js bundler working with the latest typescript with the latest trending UI framework. And a lot frustrating when things don&rsquo;t work or those articles have just outdated. Once she has actually started building the first feature for her little fun app, the weekend has mostly gone!<p>But things are changing&hellip;<p><br><h2 id=1-a-little-backstory-commonjs-and-es-module>1. A little backstory: CommonJS and ES Module</h2><p>Working with NodeJS, we all get familiar with CommonJS, the standard (read: legacy) way for NodeJS to load dependency code. After installing a module, for example, <code>lodash</code>, we can load it into our code by using <code>require('lodash')</code>. This is how NodeJS handles dependency code from the beginning:<pre><code class=language-js>const {snakeCase} = require('lodash');

['HelloWorld', 'left pad', 'ECMAScript'].forEach(text =&gt; {
  console.log(snakeCase(text));
});
</code></pre><pre><code class=language-js>// somewhere in lodash package
function snakeCase(input) {
  // where magic happens
}

exports.snakeCase = snakeCase;
</code></pre><p>ECMAScript 2015 (ES6) introduced ES Module - an official, standardized module system for JavaScript. It took a while to get here. Nowadays, <a href=https://caniuse.com/es6-module>all major browsers</a> and NodeJS (<a href=https://nodejs.medium.com/announcing-core-node-js-support-for-ecmascript-modules-c5d6dc29b663>since v13.2.0</a>) ship support for ES Module by default. ES Module has the advantage of static analysis, tree shaking and asynchronous.<pre><code class=language-js>import {snakeCase} from 'lodash';

['HelloWorld', 'left pad', 'ECMAScript'].forEach(text =&gt; {
  console.log(snakeCase(text));
});
</code></pre><pre><code class=language-js>// somewhere in lodash package
export function snakeCase(input) {
  // where magic happens
}
</code></pre><p>In NodeJS, to enable ES Module, we have two choices: use <strong>.mjs</strong> extension or set <code>&quot;type&quot;: &quot;module&quot;</code> in <strong>package.json</strong>. And while most development tools understand ES Module, there are still many incompatibles. For example, TypeScript <a href=https://github.com/microsoft/TypeScript/issues/18442>does not support outputting to .mjs files</a>. Or Vercel <a href=https://github.com/vercel/next.js/issues/9607>does not work with ES Module</a>. So some transpilers and workarounds are still required. Hopefully the situation will change soon™.<p>Many packages in NodeJS are already shipped with ES Module files. But many packages are not. At the time of this writing, in <a href=https://www.npmjs.com/browse/depended>the top 10 depended packages on npm</a>, only <a href=https://www.npmjs.com/package/tslib>tslib</a> supports <a href=https://github.com/microsoft/tslib/blob/e7a115533a28b90e48139e77462e0b5812983847/package.json#L25>ES Module file</a> by including <code>&quot;exports&quot;</code> in <em>package.json</em>. Many other top packages still don&rsquo;t ship ES Module: lodash, react, moment, request, axios, chalk, commander, express&hellip; It&rsquo;s actually not a problem for NodeJS, because NodeJS allows using <a href=https://nodejs.org/api/esm.html#esm_interoperability_with_commonjs><code>import</code> to work with both ES Module and CommonJS format</a>.<p>But browsers don&rsquo;t have that privilege. What if you want to import your favorite node module in the browser? Well, you have to be lucky. At the time of this writing, <a href=https://reactjs.org/docs/getting-started.html#add-react-to-a-website>the recommended way</a> for React to get started in the browser is to include the UMD version in <code>&lt;script&gt;</code> tag, and use the global variable <code>window.ReactDOM</code>:<pre><code class=language-html>&lt;script src=&quot;https://unpkg.com/react@17/umd/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/react-dom@17/umd/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  ReactDOM.render(
      &lt;h1&gt;Hello, world!&lt;/h1&gt;,
      document.getElementById('root')
  );
&lt;/script&gt;
</code></pre><p>No ES Module for Alice.<h2 id=2-skypack>2. Skypack</h2><p><a href=https://skypack.dev>Skypack</a> is a wonderful CDN service that transpiles node packages to be able to work well in the browser. It&rsquo;s backed by Snowpack team. Simply put the package <strong>name@version</strong> after <strong>cdn.skypack.dev</strong> and you are ready to go:<pre><code class=language-html>&lt;script type=&quot;module&quot; src=&quot;myscript.js&quot;&gt;&lt;/script&gt;
</code></pre><pre><code class=language-js>// myscript.js
import {snakeCase} from 'https://cdn.skypack.dev/lodash@4';

['HelloWorld', 'left pad', 'ECMAScript'].forEach(text =&gt; {
  console.log(snakeCase(text));
});
</code></pre><p>It just works! Of course, you may ask, there is &ldquo;<a href=https://www.npmjs.com/package/lodash-es>lodash-es</a>&rdquo; that we can import. But many packages don&rsquo;t have their doppelgängers. Or they are not frequently updated. Here, <a href=https://skypack.dev>skypack.dev</a> comes to the rescue.<p>There are still some problems, though. For unclear reasons, some versions did not work. When visiting <a href=https://cdn.skypack.dev/react@16>cdn.skypack.dev/react@16</a>, the React version 17 is served instead. But the future is bright. Alice can now start working right on her app without spending most of her weekend configuring this week&rsquo;s js bundler &hellip;<p><em><strong>Side note</strong>: I also put my own version at <a href=https://espkg.vercel.app/react@16>espkg.vercel.app/react@16</a>. You can use <a href=https://espkg.vercel.app>espkg.vercel.app</a> as an alternative until Skypack fixes the problem. Other packages also work, for example, <a href=https://espkg.vercel.app/lodash@4>espkg.vercel.app/lodash@4</a> (give it a little time for building, then the response will be cached by Vercel).</em><h2 id=3-snowpack>3. Snowpack</h2><p>Okay, I lied, a bit. <em>TypeScript</em> won&rsquo;t work directly in the browser. You still need more work. Here come the real power of <a href=https://snowpack.dev>Snowpack</a>: minimal config and remote packages. You don&rsquo;t even have to install <em>node_modules</em> to start working with your little fun app. Simply run 2 setup commands:<pre><code class=language-bash>yarn global add snowpack
snowpack init
</code></pre><p>This will give you an empty skeleton <strong>snowpack.config.js</strong>. Then add the single line config <code>source: 'remote'</code> under <code>packageOptions</code>:<pre><code class=language-js>// snowpack.config.js
packageOptions: {
  source: 'remote',
},
</code></pre><p>That&rsquo;s all! Now run <code>snowpack dev</code> and start adding your <strong>index.html</strong> and <strong>myscript.ts</strong> (yes, it&rsquo;s <em>TypeScript</em>):<pre><code class=language-html>&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;title&gt;My little app&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script type=&quot;module&quot; src=&quot;myscript.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><pre><code class=language-typescript>// myscript.ts
import {snakeCase} from 'lodash';

const words: string[] = ['HelloWorld', 'left pad', 'ECMAScript'];
words.forEach(text =&gt; {
  console.log(snakeCase(text));
});
</code></pre><p>It just works! 🎉 Look ma, no <em>node_modules</em>! No <em>package.json</em>! We even got <em>TypeScript</em> and <em>hot-reload</em> for free. Yay!<p><br><h2 id=recap>Recap</h2><p>The example code can be downloaded here: <a href=https://gist.github.com/olvrng/e9729d550cb5c2e023ed0c1f8290978f>gist.github.com/olvrng</a>. There are other configs on <a href=https://www.snowpack.dev/reference/configuration>snowpack.config.js</a> that you may need. Let&rsquo;s save that for another day. Now start tinkering with your app and spending your precious time on the most valuable feature! 🚀🚀<p><br><h2 id=p-s>P.S.</h2><p>Oh, but Alice wants to use <strong><a href=http://lesscss.org>less</a></strong>. No worry, just a single line config&hellip; I swear! She could add a file <strong>mystyle.less</strong> and one more line for <strong>snowpack.config.js</strong>. Everything will be okay. Well, this time she must remember to run <code>yarn add snowpack-plugin-less</code>! Only this time&hellip;<pre><code class=language-js>// snowpack.config.js
plugins: [
  'snowpack-plugin-less',
],
</code></pre><pre><code class=language-typescript>// myscript.ts
import {snakeCase} from 'lodash';
import './style.less'; // the less file

const words: string[] = ['HelloWorld', 'left pad', 'ECMAScript'];
words.forEach(text =&gt; {
  console.log(snakeCase(text));
});
</code></pre><p>Thank you for reading! And don&rsquo;t forget my little page <a href=https://espkg.vercel.app>espkg.vercel.app</a>.</div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul></ul></div><div id=toc-footer class=tog-footer style=display:none><nav id=TableOfContents><ul><li><ul><li><a href=#1-a-little-backstory-commonjs-and-es-module>1. A little backstory: CommonJS and ES Module</a><li><a href=#2-skypack>2. Skypack</a><li><a href=#3-snowpack>3. Snowpack</a><li><a href=#recap>Recap</a><li><a href=#p-s>P.S.</a></ul></ul></nav></div><div id=share-footer class=tog-footer style=display:none><ul><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2folvrng.github.io%2fw%2fesm%2f&title=Front-End%20development%20without%20node_modules%20using%20Skypack%20and%20Snowpack"><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2folvrng.github.io%2fw%2fesm%2f"><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2folvrng.github.io%2fw%2fesm%2f&text=Front-End%20development%20without%20node_modules%20using%20Skypack%20and%20Snowpack"><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2folvrng.github.io%2fw%2fesm%2f&title=Front-End%20development%20without%20node_modules%20using%20Skypack%20and%20Snowpack"><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2folvrng.github.io%2fw%2fesm%2f&t=Front-End%20development%20without%20node_modules%20using%20Skypack%20and%20Snowpack"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></ul></div><div id=actions-footer><a id=home class=icon href=/ ><i class="fas fa-chevron-left fa-lg" aria-hidden=true></i> Home</a> <a id=toc class=icon href=# onclick='return $(".tog-footer").toggle(),!1'><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a> <a id=share class=icon href=# onclick='return $(".tog-footer").toggle(),!1'><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> Share</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2021 Oliver N.</div><div class=footer-right><nav><ul></ul></nav></div></footer></div><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/js/main.js></script>
